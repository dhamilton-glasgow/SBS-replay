## Detector map, format:
## crate slot start_channel end_channel
sbs.hcal.detmap =
## FADC modules        #     Module number that starts at channel 0
## This map is for the 12 fADC modules used for testing
## as described in https://logbooks.jlab.org/entry/3480927
#Active fADCs and their channels.
#  21    16     8     8	
#  22    19     0     11
#  22    20     0     11
  16   3      0     15 2
  16   4      0     15 2
  16   5      0     15 2
  16   6      0     15 2
  16   7      0     15 2
  16   8      0     15 2
  16   9      0     15 2
  16   10     0     15 2
  16   13     0     15 2
  16   14     0     15 2
  16   15     0     15 2
  16   16     0     15 2
  16   17     0     15 2
  16   18     0     15 2
  16   19     0     15 2
  16   20     0     15 2
  17   19     0     15 2 #     16
  17   20     0     15 2 #     16
  #17   18     0     0  2 # 1 channel. Ref fADC (copy of sum trig with pulse shaper).
  17    4     0    31 2 # 32 channels
  17    4     32   63 2 # 32 channels
  17    5     0    31 2 # 32 channels
  17    5     32   63 2 # 32 channels
  17    6     0    31 2 # 32 channels
  17    6     32   63 2 # 32 channels
  17    7     0    31 2 # 32 channels
  17    7     32   63 2 # 32 channels
  17    8     0    31 2 # 32 channels
  17    8     32   32 2 # 1 channel. Sum module trigger copy (logical).
  17    8     34   34 2 # 1 channel. Copy of DVCS pulser EDTM signal (logical).
  17    8     35   35 2 # 1 channel. Copy of BB trigger (logical).
  17    8     36   36 2 # 1 channel. RF (logical).

sbs.hcal.ledmap = 16 30

## Channel map from channel to logical channel
sbs.hcal.start_chanmap=1
sbs.hcal.chanmap = 
#fADC Logical Mapping
##   Ch1   2   3   4   5   6   7   8   9   10  11  12  13  14  15  16 #
##----------------------------------------------------------------
#1
#       1   7   2   8   3   9   4   10  5   11  6   12 
#       13  19  14  20  15  21  16  22  17  23  18  24
	73  79  74  80  75  81  76  82  77  83  78  84  109 115 110 116   #fADC 1
	85  91  86  92  87  93  88  94  89  95  90  96  111 117 112 118   #fADC 2
	97  103 98  104 99  105 100 106 101 107 102 108 113 119 114 120   #fADC 3
	121 127 122 128 123 129 124 130 125 131 126 132 13  19  14  20    #fADC 4
	133 139 134 140 135 141 136 142 137 143 138 144 15  21  16  22    #fADC 5 
	1   7   2   8   3   9   4   10  5   11  6   12  17  23  18  24    #fADC 6
	25  31  26  32  27  33  28  34  29  35  30  36  61  67  62  68    #fADC 7
	37  43  38  44  39  45  40  46  41  47  42  48  63  69  64  70    #fADC 8
	49  55  50  56  51  57  52  58  53  59  54  60  65  71  66  72    #fADC 9
	145 151 146 152 147 153 148 154 149 155 150 156 181 187 182 188   #fADC 10
 	157 163 158 164 159 165 160 166 161 167 162 168 183 189 184 190   #fADC 11
	169 175 170 176 171 177 172 178 173 179 174 180 185 191 186 192   #fADC 12
	193 199 194 200 195 201 196 202 197 203 198 204 229 235 230 236   #fADC 13
	205 211 206 212 207 213 208 214 209 215 210 216 231 237 232 238   #fADC 14
	217 223 218 224 219 225 220 226 221 227 222 228 233 239 234 240   #fADC 15
	241 247 242 248 243 249 244 250 245 251 246 252 277 283 278 284   #fADC 16
	253 259 254 260 255 261 256 262 257 263 258 264 279 285 280 286   #fADC 17
	265 271 266 272 267 273 268 274 269 275 270 276 281 287 282 288  #-1000  #fADC 18
#F1TDC Logical Mapping
##   Ch33  34  35  36  37  38  39  40  41  42  43  44  45  46  47  48  49  50  51  52  53  54  55  56  57  58  59  60  61  62  63  64 #
##----------------------------------------------------------------
#1
#       13  19  14  20  15  21  16  22  17  23  18  24  1   7   2   8   3   9   4   10  5   11  6   12
       85  91  86  92  87  93  88  94  89  95  90  96  111 117 112 118 73  79  74  80  75  81  76  82  77  83  78  84  109 115 110 116  #TDC 1. Ribbons 1, 2.
       169 175 170 176 171 177 172 178 173 179 174 180 185 191 186 192 157 163 158 164 159 165 160 166 161 167 162 168 183 189 184 190  #TDC 1. Ribbons 11, 12.
       121 127 122 128 123 129 124 130 125 131 126 132 13  19  14  20  97  103 98  104 99  105 100 106 101 107 102 108 113 119 114 120  #TDC 2. Ribbons 3, 4.
       205 211 206 212 207 213 208 214 209 215 210 216 231 237 232 238 193 199 194 200 195 201 196 202 197 203 198 204 229 235 230 236  #TDC 2. Ribbons 13, 14.
       1   7   2   8   3   9   4   10  5   11  6   12  17  23  18  24  133 139 134 140 135 141 136 142 137 143 138 144 15  21  16  22   #TDC 3. Ribbons 5, 6.
       241 247 242 248 243 249 244 250 245 251 246 252 277 283 278 284 217 223 218 224 219 225 220 226 221 227 222 228 233 239 234 240  #TDC 3. Ribbons 15, 16.
       37  43  38  44  39  45  40  46  41  47  42  48  63  69  64  70  25  31  26  32  27  33  28  34  29  35  30  36  61  67  62  68   #TDC 4. Ribbons 7, 8.
       265 271 266 272 267 273 268 274 269 275 270 276 281 287 282 288 253 259 254 260 255 261 256 262 257 263 258 264 279 285 280 286  #TDC 4. Ribbons 17, 18.
##   Ch1   2   3   4   5   6   7   8   9   10  11  12  13  14  15  16
       145 151 146 152 147 153 148 154 149 155 150 156 181 187 182 188 49  55  50  56  51  57  52  58  53  59  54  60  65  71  66  72   -1000  -1000  -1000  -1000  #TDC 5. Ribbons 9, 10.       

## Positions in [m] where +z is roated by sbs.theta
sbs.hcal.position = 0 0 0

## HCal is composed of 4 sub-assemblies each of 6x12 (row,col) modules

## Test settings for one sub-assembly
sbs.hcal.size  =  1.8567  0.9461  1.0000

## HCal is a matrix of with nrows and ncols
## Numbers below are just a test so that it maches the number of used fADC's
#sbs.hcal.ncols = 12
#sbs.hcal.nrows = 16
sbs.hcal.nrows = 24
sbs.hcal.ncols = 12

## Position of first module
sbs.hcal.xyz    =  0.92835  0.47305 0.0
## Space between modules
#sbs.hcal.dxdydz  =  0.00254  0.00254 0.0
# Add 0.15m to space between of 0.00254m
sbs.hcal.dxdydz  =  0.15254  0.15254 0.0 

## Mininum energy  for a cluster center (not really used right now)
sbs.hcal.emin  = 0.0

## Add good time cut at 806ns
sbs.hcal.tdc.GoodTimeCut = 806

## adc channels to mV assume F250 set fot 2V for 4096
sbs.hcal.adc.conv = 0.4882
# Threshold for pulse finding in waveform (mV)
sbs.hcal.adc.thres = 5.0 #5.0
# Number of bins (bin=4ns) at the beginning of waveform used to determing average Pedestal
sbs.hcal.adc.NPedBin = 4
# Number of bins (bin=4ns) before Threshold Bin to use in integrating pulse
sbs.hcal.adc.NSB = 3 #3
# Number of bins (bin=4ns) before Threshold Bin to use in integrating pulse
sbs.hcal.adc.NSA = 10 #10
# Number of bin for fixed Threshold if no Threshold Crossing is found
sbs.hcal.adc.FixThresBin = 14
# Convert adc integral in pC to GeV
# Current 11.7.21 from all pre-HV change data
sbs.hcal.adc.gain =
0.00175  0.00266867  0.00263163  0.00180382  0.00263728  0.00185798  0.0024062  0.00332779  0.00145959  0.00145491  0.00222524  0.00374568  
0.00175  0.0028114  0.00311657  0.0025307  0.00220669  0.00193068  0.00133793  0.00033258  0.000987108  0.00208857  0.00104803  0.00256277  
0.00175  0.00198737  0.00238623  0.00245061  0.00215401  0.00192553  0.000814091  0.00111288  0.00151991  0.00215693  0.000868816  0.0031688  
0.00175  0.00370595  0.00207407  0.00228005  0.00181339  0.00196883  0.00188691  0.00208838  0.00164712  0.00208062  0.00191594  0.00296845  
0.00175  0.00289564  0.00231741  0.00213534  0.00214065  0.0017051  0.00202623  0.00197243  0.0019649  0.00202092  0.00184944  0.00272894  
0.00539881  0.00349153  0.00254019  0.00170834  0.00187107  0.00187614  0.00208782  0.00184612  0.00175581  0.00153972  0.00173477  0.00254265  
0.00169373  0.00130524  0.000966914  0.00134621  0.00121074  0.00135627  0.0018578  0.00181004  0.00183508  0.00200068  0.00173649  0.00311957  
0.0030827  0.00372947  0.00255013  0.0024255  0.00188588  0.00184469  0.00203854  0.00175418  0.00182285  0.00208202  0.00197725  0.00326762  
0.00512732  0.00316712  0.002374  0.00224892  0.00203045  0.00160974  0.00119972  0.00185589  0.00166473  0.00190801  0.00176975  0.00300717  
0.00260136  0.00288451  0.00222348  0.00223933  0.0018114  0.00163791  0.00173089  0.00166217  0.00185743  0.00194299  0.00155949  0.00305697  
0.00607633  0.00348856  0.00235369  0.00200456  0.00194897  0.00176758  0.00188387  0.00176643  0.00185465  0.00197599  0.00126722  0.00216883  
0.0072298  0.00307353  0.00188761  0.0019443  0.00140963  0.00131958  0.00153957  0.00173835  0.00177267  0.0020961  0.00240923  0.00372126  
0.00234592  0.00167112  0.00173693  0.00034076  0.00104464  0.00092002  0.00150679  0.00179541  0.00196525  0.00176972  0.00228241  0.0035386  
0.00660769  0.00254332  0.00232964  0.0016091  0.00139604  0.00152916  0.0015387  0.00193139  0.00145191  0.0022929  0.00270455  0.00379699  
0.00212358  0.0031528  0.00169967  0.00187637  0.00170249  0.00189173  0.0017596  0.00179713  0.00202973  0.000282054  0.00250264  0.00341337  
0.00335189  0.00267784  0.0023822  0.00188996  0.00145311  0.00129659  0.00172519  0.00187615  0.00192496  0.0022379  0.00274045  0.00356526  
0.00349821  0.00208082  0.00243457  0.00182426  0.00118586  0.00161923  0.0015286  0.00104067  0.00180417  0.00201467  0.00268893  0.00340549  
0.00274887  0.00280964  0.00227678  0.00158279  0.00168266  0.00144933  0.00171416  0.00190508  0.00192204  0.00209136  0.00277177  0.00366691  
0.0050249  0.00292725  0.00225719  0.00157969  0.00163578  0.00152226  0.00159482  0.00169469  0.0016066  0.00229904  0.00274889  0.0037875  
0.00432152  0.0028822  0.00217111  0.00179476  0.00164257  0.0015453  0.00149149  0.00145206  0.00182338  0.00240198  0.00296171  0.00372496  
0.0045194  0.00289505  0.00467872  0.0016102  0.00243146  0.00151844  0.00131835  0.00167033  0.0019338  0.00213015  0.00226239  0.00410904  
0.00265122  0.00206662  0.00225118  0.00200294  0.00178346  0.001705  0.00180826  0.00179812  0.0019239  0.00184578  0.00230078  0.00338812  
0.00175  0.00403728  0.00184311  0.00188862  0.00164165  0.00163744  0.00149042  0.0017886  0.00188636  0.0022608  0.00262937  0.00308539  
0.00731553  0.00733844  0.00269888  0.00236267  0.00204097  0.00246712  0.00241754  0.00240661  0.00195007  0.00151657  0.00263376  0.00416878 
# 
sbs.hcal.tdc.offset =
51.6052  53.1381  75.711  62.3824  -64.8101  -49.5039  -16.1844  -33.8902  67.763  65.2803  74.9802  46.4545  
78.6722  78.2396  63.5186  78.6833  -36.4883  -30.7707  -24.0491  -16.4224  85.6185  68.1837  71.3112  56.5909  
64.0445  52.6813  87.4801  78.7829  -40.4086  -33.1198  -37.1459  -42.5131  97.7638  74.9225  60.3911  54.1738  
95.8128  98.0925  122.216  111.835  -4.14176  -9.11937  0  -0.0246738  109.739  122.598  92.6682  74.059  
-12.3159  -9.2373  -8.41619  -0.39065  -72.9534  -99.4989  -105.177  -108.026  -3.92294  5.20389  -1.74325  -10.1903  
110.999  113.306  126.067  120.815  -100.918  -84.1958  19.4866  16.1717  137.576  127.848  7.37405  8.3169  
42.849  77.3066  88.1684  93.4548  -36.7794  -24.315  -21.1369  -33.6198  126.699  114.999  79.33  63.7887  
96.7496  88.5692  99.0824  92.4448  -6.87795  -13.2878  -19.3181  -10.1457  87.3303  111.9  66.7838  59.101  
111.863  125.724  113.91  110.842  7.28227  4.90495  21.2512  12.3495  112.563  121.519  113.138  105.109  
84.9052  95.6989  107.758  100.946  18.9589  20.2386  20.9004  20.8449  122.96  91.8478  110.502  109.098  
132.579  108.904  107.074  106.125  36.3715  23.224  40.6818  38.4267  114.892  120.195  107.725  88.8613  
105.714  112.342  121.262  109.64  3.5718  -5.55847  14.629  16.5227  127.141  121.331  94.1712  92.4037  
-28.3475  -12.4915  -16.176  -2.35038  -118.309  -102.759  -112.91  -105.626  11.6323  3.00557  -2.78524  -14.6378  
128.323  125.449  120.715  104.829  51.3949  14.4151  54.3329  41.447  112.008  114.84  142.813  108.737  
97.4597  121.844  115.635  103.866  23.6189  30.5603  44.9171  33.1805  112.155  89.7849  104.902  117.556  
1.23497  -10.884  128.598  137.733  28.8473  7.63449  -81.1601  -81.3845  127.848  144.716  112.554  110.205  
95.3282  92.8283  131.052  139.466  21.4253  46.3608  5.66095  -14.1183  150.785  131.072  134.173  106.736  
-73.7123  -72.157  0.825379  -28.8035  59.844  53.0085  -122.239  -130.565  9.17359  -13.9012  150.787  135.087  
102.953  93.79  137.682  119.49  -107.541  -90.8528  29.1073  41.3303  137.553  126.15  -12.7449  -39.9297  
117.381  141.75  151.81  150.345  -130.425  -122.595  63.285  42.3564  153.701  166.062  -39.0284  -43.4599  
79.6345  105.374  99.1642  115.317  -108.623  -104.695  34.7333  23.3209  114.342  112.427  -39.0258  -46.3406  
81.9736  85.6216  122.161  110.249  16.1559  37.152  63.5  23.8763  111.813  100.931  105.722  74.6418  
103.489  135.58  122.72  113.029  34.5295  48.8976  31.2923  36.1094  126.375  109.23  101.896  103.769  
-56.248  -51.1446  98.0804  87.691  22.5598  39.2716  -117.507  -145.363  114.921  94.8606  85.7814  109.389
#
sbs.hcal.tdc.calib = 0.112
# sbs.hcal.tdc.calib = 0.0936 #New constant from Hodo group for 1190. Will need to check if appropriate for f1s. 
#-------[ 2021-10-24 04:30:00 ] # First Change in HV for HCAL
#sbs.hcal.adc.gain =

